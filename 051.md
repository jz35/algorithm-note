# 第51课：二分答案法及相关题目

## 一、二分答案法概述

### （一）定义

二分答案法是一种通过二分搜索来寻找问题最优解的算法技巧。它适用于那些答案具有单调性的问题。

### （二）==关键步骤==

1. **估计答案范围**：确定最终答案可能的范围。这个范围可以比较粗略，因为二分搜索的次数通常不多。
2. **分析单调性**：分析问题的答案和给定条件之间的单调性关系。大部分情况下，这需要依靠自然智慧。
3. **建立判断函数**：建立一个函数`f`，当答案固定时，判断给定的条件是否满足。
4. **二分搜索**：在答案可能的范围内不断二分搜索，每次使用`f`函数判断，直到找到最合适的答案。

### （三）核心点

- **分析单调性**：这是二分答案法的关键，需要理解问题的答案是如何随着条件变化而变化的。
- **建立判断函数**：这个函数用于在二分过程中判断当前的中间值是否满足条件。

### （四）注意事项

- 二分答案法是一个常用且重要的技巧，需要引起重视。它非常精妙，以后的课程中还会经常遇到。

## 二、二分答案法的应用

### （一）爱吃香蕉的珂珂

- **问题描述**：珂珂有`n`堆香蕉，每堆有`piles[i]`根。警卫将在`h`小时后回来。珂珂可以决定吃香蕉的速度`k`（单位：根/小时）。每小时，她会选择一堆香蕉，从中吃掉`k`根。如果这堆香蕉少于`k`根，她将吃掉这堆的所有香蕉，然后这一小时内不会再吃更多的香蕉。珂珂想在警卫回来前吃掉所有香蕉，返回她可以在`h`小时内吃掉所有香蕉的最小速度`k`。
- **解题思路**：
  1. **估计答案范围**：最小速度为1，最大速度为`max(piles)`。
  2. **分析单调性**：速度越快，吃掉所有香蕉所需的时间越短。
  3. **建立判断函数**：`f(k)`，判断速度为`k`时，是否可以在`h`小时内吃掉所有香蕉。
  4. **二分搜索**：在`[1, max(piles)]`范围内二分搜索，找到最小的`k`。
- **测试链接**：[LeetCode - Koko Eating Bananas](https://leetcode.cn/problems/koko-eating-bananas/)

### （二）分割数组的最大值（画匠问题）

- **问题描述**：给定一个非负整数数组`nums`和一个整数`m`，将数组分成`m`个非空的连续子数组。设计一个算法使得这`m`个子数组各自和的最大值最小。
- **解题思路**：
  1. **估计答案范围**：最小值为`max(nums)`，最大值为`sum(nums)`。
  2. **分析单调性**：子数组的最大和越小，需要的子数组数量越多。
  3. **建立判断函数**：`f(maxSum)`，判断是否可以将数组分成`m`个子数组，每个子数组的和不超过`maxSum`。
  4. **二分搜索**：在`[max(nums), sum(nums)]`范围内二分搜索，找到最小的`maxSum`。
- **测试链接**：[LeetCode - Split Array Largest Sum](https://leetcode.cn/problems/split-array-largest-sum/)

### （三）机器人跳跃问题

- **问题描述**：机器人从编号为0的建筑开始，每一步跳到下一个建筑。如果当前建筑高度为`H(k)`，能量值为`E`，跳到下一个建筑`H(k+1)`时，如果`H(k+1) > E`，则失去`H(k+1) - E`的能量值；否则获得`E - H(k+1)`的能量值。目标是到达编号为`N`的建筑，能量值不能为负。返回机器人开始游戏时需要的最小能量值。
- **解题思路**：
  1. **估计答案范围**：最小能量值为0，最大能量值为`max(H)`。
  2. **分析单调性**：初始能量值越高，越容易完成游戏。
  3. **建立判断函数**：`f(E)`，判断初始能量值为`E`时，是否可以完成游戏。
  4. **二分搜索**：在`[0, max(H)]`范围内二分搜索，找到最小的`E`。
- **测试链接**：[牛客网 - 机器人跳跃问题](https://www.nowcoder.com/practice/7037a3d57bbd4336856b8e16a9cafd71)

### （四）找出第K小的数对距离

- **问题描述**：给定一个整数数组`nums`和一个整数`k`，数对`(a, b)`由`nums[i]`和`nums[j]`组成，且满足`0 <= i < j < len(nums)`。数对距离定义为`|a - b|`。返回所有数对距离中第`k`小的数对距离。
- **解题思路**：
  1. **估计答案范围**：最小距离为0，最大距离为`max(nums) - min(nums)`。
  2. **分析单调性**：距离越小，满足条件的数对数量越多。
  3. **建立判断函数**：`f(distance)`，判断距离小于等于`distance`的数对数量是否大于等于`k`。
  4. **二分搜索**：在`[0, max(nums) - min(nums)]`范围内二分搜索，找到第`k`小的数对距离。
- **测试链接**：[LeetCode - Find K-th Smallest Pair Distance](https://leetcode.cn/problems/find-k-th-smallest-pair-distance/)

### （五）同时运行N台电脑的最长时间

- **问题描述**：你有`n`台电脑，每个电池可以让一台电脑运行`batteries[i]`分钟。你想使用这些电池让所有`n`台电脑同时运行。返回你可以让`n`台电脑同时运行的最长分钟数。
- **解题思路**：
  1. **估计答案范围**：最小时间为0，最大时间为`sum(batteries) / n`。
  2. **分析单调性**：每台电脑的运行时间越长，需要的总时间越长。
  3. **建立判断函数**：`f(time)`，判断是否可以让所有`n`台电脑同时运行`time`分钟。
  4. **二分搜索**：在`[0, sum(batteries) / n]`范围内二分搜索，找到最长的`time`。
- **测试链接**：[LeetCode - Maximum Running Time of N Computers](https://leetcode.cn/problems/maximum-running-time-of-n-computers/)

### （六）计算等位时间

- **问题描述**：给定一个数组`arr`，表示`n`个服务员，每服务一个客人的时间。给定一个正数`m`，表示有`m`个人等位。如果你是刚来的人，每个客人都遵循有空位就上的原则，问你需要等多久？
- **解题思路**：
  1. **估计答案范围**：最小等待时间为0，最大等待时间为`m * max(arr)`。
  2. **分析单调性**：等待时间越长，可以服务的客人数量越多。
  3. **建立判断函数**：`f(time)`，判断在`time`分钟内可以服务的客人数量是否大于等于`m`。
  4. **二分搜索**：在`[0, m * max(arr)]`范围内二分搜索，找到最小的`time`。
- **测试链接**：无

### （七）刀砍毒杀怪兽问题

- **问题描述**：怪兽的初始血量为`hp`，每回合可以选择刀砍或毒杀。刀砍直接损失`cuts[i]`血量，毒杀从下一回合开始每回合损失`poisons[i]`血量。返回至少多少回合怪兽会死掉。
- **解题思路**：
  1. **估计答案范围**：最小回合数为1，最大回合数为`n`。
  2. **分析单调性**：回合数越少，怪兽越快死亡。
  3. **建立判断函数**：`f(turns)`，判断在`turns`回合内是否可以杀死怪兽。
  4. **二分搜索**：在`[1, n]`范围内二分搜索，找到最小的`turns`。
- **测试链接**：无

## 三、总结

二分答案法是一种非常重要的算法技巧，适用于具有单调性的问题。通过合理估计答案范围、分析单调性、建立判断函数，并进行二分搜索，可以高效地找到问题的最优解。掌握二分答案法的关键在于理解问题的单调性特征，并能够灵活地建立判断函数。