# ç¬¬55è¯¾ï¼šå•è°ƒé˜Ÿåˆ—ï¼ˆä¸‹ï¼‰

### **ç®—æ³•é¢˜ï¼šå’Œè‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„**

#### **é¢˜ç›®æè¿°**

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œå…¶ä¸­çš„å€¼å¯ä»¥æ˜¯**æ­£ã€è´Ÿæˆ– 0**ï¼Œä»¥åŠä¸€ä¸ªæ­£æ•´æ•° `k`ï¼Œæ±‚**æ‰€æœ‰ç´¯åŠ å’Œ â‰¥ k çš„å­æ•°ç»„ä¸­ï¼Œæœ€çŸ­çš„å­æ•°ç»„é•¿åº¦**ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å­æ•°ç»„ï¼Œåˆ™è¿”å› `-1`ã€‚

#### **è¾“å…¥æè¿°**

- **ç¬¬ä¸€è¡Œ**ï¼šä¸¤ä¸ªæ•´æ•° `n` å’Œ `k`ï¼Œåˆ†åˆ«è¡¨ç¤ºæ•°ç»„çš„é•¿åº¦ `n` å’Œç›®æ ‡å’Œ `k`ã€‚
- **ç¬¬äºŒè¡Œ**ï¼šåŒ…å« `n` ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ•°ç»„ `nums`ã€‚

#### **è¾“å‡ºæè¿°**

- è¾“å‡ºæ»¡è¶³æ¡ä»¶çš„æœ€çŸ­å­æ•°ç»„é•¿åº¦ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¾“å‡º `-1`ã€‚

#### **è¾“å…¥ç¤ºä¾‹ 1**

```
3 3
2 -1 2
```

#### **è¾“å‡ºç¤ºä¾‹ 1**

```
3
```

#### **è¾“å…¥ç¤ºä¾‹ 2**

```
5 5
1 2 3 -1 4
```

#### **è¾“å‡ºç¤ºä¾‹ 2**

```
2
```

------

## **è§£æ³• 1ï¼šå•è°ƒé˜Ÿåˆ—ï¼ˆä½¿ç”¨ `deque`ï¼‰**

### **ç®—æ³•çŸ¥è¯†**

- é€šè¿‡**å‰ç¼€å’Œ**å°†é—®é¢˜è½¬æ¢ä¸ºæ±‚**å‰ç¼€å’Œå·®å€¼ â‰¥ k** çš„æœ€çŸ­åŒºé—´ã€‚
- **ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å¢é˜Ÿåˆ—**ï¼Œä¿è¯å‰ç¼€å’Œçš„ç´¢å¼•å•è°ƒé€’å¢ï¼Œä»¥ä¾¿é«˜æ•ˆæŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ã€‚
- **åˆ©ç”¨æ»‘åŠ¨çª—å£**ï¼Œç¡®ä¿å½“å‰ `prefixSum[i] - prefixSum[deque.front()] >= k` æ—¶ï¼Œæ›´æ–°æœ€å°é•¿åº¦ã€‚

### **ä»£ç å®ç°ï¼ˆSTL `deque` ç‰ˆï¼‰**

```cpp
#include <iostream>
#include <vector>
#include <deque>
#include <climits>

using namespace std;

class Solution {
public:
    int shortestSubarray(vector<int>& nums, int k) {
        int n = nums.size();
        vector<long long> prefixSum(n + 1, 0);
        deque<int> dq; // ç»´æŠ¤å•è°ƒé€’å¢çš„å‰ç¼€å’Œç´¢å¼•
        int ans = INT_MAX;

        // è®¡ç®—å‰ç¼€å’Œ
        for (int i = 0; i < n; i++) {
            prefixSum[i + 1] = prefixSum[i] + nums[i];
        }

        for (int i = 0; i <= n; i++) {
            // æ£€æŸ¥é˜Ÿåˆ—å¤´éƒ¨æ˜¯å¦æ»¡è¶³æ¡ä»¶
            while (!dq.empty() && prefixSum[i] - prefixSum[dq.front()] >= k) {
                ans = min(ans, i - dq.front());
                dq.pop_front();
            }

            // ç»´æŒå•è°ƒé€’å¢é˜Ÿåˆ—
            while (!dq.empty() && prefixSum[dq.back()] >= prefixSum[i]) {
                dq.pop_back();
            }

            // å½“å‰ç´¢å¼•å…¥é˜Ÿ
            dq.push_back(i);
        }

        return ans == INT_MAX ? -1 : ans;
    }
};

int main() {
    int n, k;
    cin >> n >> k;
    vector<int> nums(n);
    for (int i = 0; i < n; i++) {
        cin >> nums[i];
    }

    Solution sol;
    cout << sol.shortestSubarray(nums, k) << endl;
    return 0;
}
```

### **å¤æ‚åº¦åˆ†æ**

- **æ—¶é—´å¤æ‚åº¦**ï¼š$O(N)$ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šè¿›å‡º `deque` ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š$O(N)$ï¼Œç”¨äºå­˜å‚¨å‰ç¼€å’Œå’Œé˜Ÿåˆ—ã€‚

------

## **è§£æ³• 2ï¼šå•è°ƒé˜Ÿåˆ—ï¼ˆæ•°ç»„å®ç°ï¼‰**

### **ç®—æ³•çŸ¥è¯†**

- **å»æ‰ `deque`ï¼Œæ”¹ç”¨æ•°ç»„ `queue[MAXN]` æ¥å­˜å‚¨ç´¢å¼•**ï¼Œä»¥ `h` å’Œ `t` ä½œä¸ºå¤´å°¾æŒ‡é’ˆã€‚
- **ä¿è¯ `queue` é‡Œçš„å‰ç¼€å’Œç´¢å¼•å•è°ƒé€’å¢**ï¼Œè¿™æ ·å¯ä»¥å¿«é€Ÿæ‰¾åˆ°æ»¡è¶³ `prefixSum[i] - prefixSum[queue[h]] >= k` çš„æœ€çŸ­å­æ•°ç»„ã€‚

### **ä»£ç å®ç°ï¼ˆæ•°ç»„ `queue` ç‰ˆï¼‰**

```cpp
#include <iostream>
#include <vector>
#include <climits>

using namespace std;

const int MAXN = 100005; // è®¾å®šæœ€å¤§æ•°ç»„é•¿åº¦

class Solution {
public:
    int shortestSubarray(vector<int>& nums, int k) {
        int n = nums.size();
        long long prefixSum[MAXN] = {0}; // å­˜å‚¨å‰ç¼€å’Œ
        int queue[MAXN]; // ç»´æŠ¤å•è°ƒé˜Ÿåˆ—
        int h = 0, t = 0; // å¤´éƒ¨ hï¼Œå°¾éƒ¨ t
        
        // è®¡ç®—å‰ç¼€å’Œ
        for (int i = 0; i < n; i++) {
            prefixSum[i + 1] = prefixSum[i] + nums[i];
        }

        int ans = INT_MAX;
        for (int i = 0; i <= n; i++) {
            // ç»´æŠ¤çª—å£ï¼Œä¿è¯æœ€çŸ­å­æ•°ç»„
            while (h < t && prefixSum[i] - prefixSum[queue[h]] >= k) {
                ans = min(ans, i - queue[h]);
                h++; // å¤´éƒ¨å‡ºé˜Ÿ
            }

            // ç»´æŒå•è°ƒæ€§ï¼šä¿è¯é˜Ÿåˆ—ä¸­å‰ç¼€å’Œé€’å¢
            while (h < t && prefixSum[queue[t - 1]] >= prefixSum[i]) {
                t--; // å°¾éƒ¨å‡ºé˜Ÿ
            }

            // å½“å‰ç´¢å¼•å…¥é˜Ÿ
            queue[t++] = i;
        }

        return ans == INT_MAX ? -1 : ans;
    }
};

int main() {
    Solution sol;
    vector<int> nums = {2, -1, 2};
    int k = 3;
    cout << sol.shortestSubarray(nums, k) << endl; // è¾“å‡º 3
    return 0;
}
```

### **å¤æ‚åº¦åˆ†æ**

- **æ—¶é—´å¤æ‚åº¦**ï¼š$O(N)$ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šè¿›å‡º `queue` ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š$O(N)$ï¼Œç”¨äºå­˜å‚¨å‰ç¼€å’Œå’Œ `queue` æ•°ç»„ã€‚

------

## **æ€»ç»“**

| æ–¹æ³•                  | å¤æ‚åº¦ | é¢å¤–ç©ºé—´ | é€‚ç”¨æƒ…å†µ               |
| --------------------- | ------ | -------- | ---------------------- |
| **STL `deque` å®ç°**  | $O(N)$ | $O(N)$   | é€‚ç”¨äºä¸€èˆ¬æƒ…å†µ         |
| **æ•°ç»„ `queue` å®ç°** | $O(N)$ | $O(N)$   | é€‚ç”¨äºæ›´ä¸¥æ ¼çš„ç©ºé—´ä¼˜åŒ– |

ä¸¤ç§æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯ **å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–æ»‘åŠ¨çª—å£**ï¼Œ**åŒºåˆ«åœ¨äºæ•°æ®ç»“æ„çš„é€‰æ‹©**ï¼š

- **å¦‚æœå¯ä»¥ä½¿ç”¨ STLï¼Œåˆ™ `deque` æ›´ç®€æ´ã€æ˜“è¯»**ï¼›
- **å¦‚æœå¸Œæœ›é¿å… STLï¼Œæˆ–è€…ä½¿ç”¨ C é£æ ¼æ•°ç»„ï¼Œåˆ™ `queue` ç‰ˆæœ¬æ›´é€‚åˆ**ã€‚

ä¸¤ç§æ–¹æ³•éƒ½åœ¨ **LeetCode 862** é¢˜ç›®ä¸Šè¡¨ç°ä¼˜ç§€ï¼Œå»ºè®®æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼ ğŸš€