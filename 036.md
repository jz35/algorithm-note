# 第36课：二叉树高频题（上）

### 二叉树高频题目概述

本课程主要讲解二叉树的高频题目，但不包含树型dp题目，树型dp问题将在动态规划大章节中讲述，换根dp问题则在扩展课程中讲解。此外，AVL树的实现、树的左旋右旋等内容也在扩展课程中。

### 题目列表与要点

#### 题目1：二叉树的层序遍历

- **核心思想**：借助队列实现层次遍历，逐层访问节点。
- **步骤**：
  1. 初始化队列，将根节点入队。
  2. 当队列非空时，执行循环：
     - 记录当前层节点数量。
     - 遍历当前层所有节点，访问节点值，将其子节点（先左后右）入队。
  3. 重复步骤2，直至队列为空。

#### 题目2：二叉树的锯齿形层序遍历

- **核心思想**：在层序遍历基础上，根据层数奇偶性调整节点值的存储顺序。
- **步骤**：
  1. 按层序遍历方式遍历二叉树。
  2. 使用一个标志变量记录当前层是奇数层还是偶数层。
  3. 若为奇数层，正常存储节点值；若为偶数层，将节点值插入结果列表的对应层头部，实现逆序存储。

#### 题目3：二叉树的最大特殊宽度

- **核心思想**：利用完全二叉树的性质，通过节点在层序遍历中的索引计算宽度。
- **步骤**：
  1. 层序遍历二叉树，为每个节点分配索引，根节点索引为1，左子节点索引为父节点索引*2，右子节点索引为父节点索引*2+1。
  2. 计算每层的最大索引与最小索引之差加1，即为该层的特殊宽度。
  3. 遍历所有层，取最大特殊宽度作为结果。

#### 题目4：求二叉树的最大深度、求二叉树的最小深度

- **求最大深度**：
  - **递归法**：递归遍历左右子树，取左右子树深度较大者加1作为当前节点深度。
  - **迭代法（层序遍历）**：层序遍历过程中，记录遍历的层数即为树的最大深度。
- **求最小深度**：
  - **递归法**：递归遍历左右子树，若左右子树都存在，则取左右子树深度较小者加1；若只有左子树或右子树，则取存在的子树深度加1。
  - **迭代法（层序遍历）**：层序遍历过程中，当遇到第一个叶子节点时，当前层数即为树的最小深度。

#### 题目5：二叉树先序序列化和反序列化

- **序列化**：
  - **核心思想**：先序遍历二叉树，将节点值按先序顺序存储为字符串，空节点用特殊字符（如“#”）表示。
  - **步骤**：递归遍历二叉树，先访问根节点，将其值转为字符串并拼接到结果字符串，若节点为空则拼接“#”，然后递归序列化左子树和右子树，各子树间用分隔符（如“!”）隔开。
- **反序列化**：
  - **核心思想**：根据序列化字符串，按先序顺序重建二叉树。
  - **步骤**：将序列化字符串按分隔符分割成节点值列表，递归构建二叉树，先构建根节点，若节点值为“#”则返回空，否则创建节点，并递归构建其左子树和右子树。

#### 题目6：二叉树按层序列化和反序列化

- **序列化**：
  - **核心思想**：层序遍历二叉树，将节点值按层序顺序存储为字符串，空节点用特殊字符表示。
  - **步骤**：借助队列层序遍历二叉树，将节点值转为字符串并拼接到结果字符串，空节点拼接特殊字符，各层节点间用分隔符隔开。
- **反序列化**：
  - **核心思想**：根据层序序列化字符串，按层序重建二叉树。
  - **步骤**：将序列化字符串按分隔符分割成节点值列表，创建根节点，使用队列辅助重建过程，将根节点入队，然后按层序依次为节点分配左右子节点，若节点值为特殊字符则分配空节点，直至所有节点分配完毕。

#### 题目7：利用先序与中序遍历序列构造二叉树

- **核心思想**：利用先序遍历确定根节点，中序遍历确定左右子树节点范围，递归构建二叉树。
- **步骤**：
  1. 在先序遍历序列中，第一个节点为根节点。
  2. 在中序遍历序列中，找到根节点的位置，其左侧为左子树节点，右侧为右子树节点。
  3. 根据左子树和右子树的节点数量，在先序遍历序列中确定左子树和右子树的节点范围。
  4. 递归构建左子树和右子树。

#### 题目8：验证完全二叉树

- **核心思想**：层序遍历二叉树，检查节点的出现顺序是否符合完全二叉树的性质。
- **步骤**：
  1. 层序遍历二叉树，使用队列存储节点。
  2. 遍历过程中，若遇到一个节点为空，则之后的所有节点都必须为空，否则不是完全二叉树。

#### 题目9：求完全二叉树的节点个数，要求时间复杂度低于O(n)

- **核心思想**：利用完全二叉树的性质，通过二分查找和节点深度计算快速求得节点个数。
- **步骤**：
  1. 计算树的最大深度。
  2. 从根节点开始，二分查找最后一层的节点个数，通过判断节点的左子树或右子树是否存在来确定节点范围，逐步缩小查找区间。
  3. 最后将前n-1层的节点个数（2^(n-1)-1）与最后一层的节点个数相加，得到总节点个数。

### 注意事项

- 中序遍历无法完成二叉树的序列化和反序列化，因为无法仅通过中序遍历序列确定二叉树的结构。
- 后序遍历可以用于序列化和反序列化，但本课程未详细讲述。