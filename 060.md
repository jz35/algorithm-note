# 第60课：拓扑排序进阶

### 一、前置知识

- **同余原理**：建议先学习讲解041-同余原理，因为部分题目（如最大食物链计数）的答案可能很大，需要取模，同余原理是理解取模操作的重要基础。
- **图的相关知识**：讲解059~讲解065都是与图相关的【必备】课程，建议从头开始学习，以更好地理解拓扑排序及其扩展技巧在图中的应用。

### 二、拓扑排序扩展技巧的核心要点

- **核心技巧**：利用拓扑排序的过程，让上游节点逐渐推送消息给下游节点。虽然这个技巧涉及树型动态规划（dp）的内容，但即使不会动态规划，也能听懂本节课的内容。后续【必备】课程会专门讲述动态规划专题，包括树型dp。

### 三、具体题目及分析

#### （一）最大食物链计数

- **题目背景**：给定一个有向无环图，图中的边a -> b表示a在食物链中被b捕食，要求计算从最初级动物到最顶级捕食者的食物链条数。
- **关键点**：题目答案可能很大，需要取模，这与同余原理相关。通过拓扑排序，可以按照食物链的层级顺序处理节点，从而统计食物链的条数。

#### （二）喧闹和富有

- **题目背景**：有编号为0到n-1的人，每个人有不同的钱数和安静值。richer数组表示谁比谁更有钱，quiet数组表示每个人的安静值，要求找到对于每个人，在所有钱不少于他的人中最安静的人。
- **关键点**：利用拓扑排序，可以按照财富关系的层级顺序处理每个人，通过上游节点（更有钱的人）向下游节点（相对贫穷的人）推送安静值最小的人的信息，最终得到答案。

#### （三）并行课程 III

- **题目背景**：有n节课，给定先修课关系和每节课的完成时间，要求计算完成所有课程所需的最少月份数，可以同时上任意门课程。
- **关键点**：根据先修课关系构成的有向无环图，通过拓扑排序确定课程的先后顺序。在排序过程中，计算每门课程最早可以开始的时间，从而确定完成所有课程所需的最少月份数。

#### （四）参加会议的最多员工数

- **题目背景**：公司组织会议，有n位员工，每位员工都喜欢一位其他员工，只有被安排在喜欢的员工旁边才会参加会议，要求计算最多能邀请的员工数目。
- **关键点**：虽然题目没有直接提到拓扑排序，但可以考虑将员工之间的喜欢关系构建成图，通过类似拓扑排序的思想来分析员工的安排顺序，以确定最多能邀请的员工数目。

### 四、总结

- 本节课围绕拓扑排序的扩展技巧展开，重点在于利用拓扑排序过程中上游节点向下游节点推送消息的技巧，来解决与图相关的不同类型问题。
- 涉及的题目包括最大食物链计数、喧闹和富有、并行课程 III、参加会议的最多员工数等，每个题目都有其独特的背景和关键点，但都可以通过拓扑排序的扩展技巧来解决。
- 前置知识包括同余原理和图的相关知识，这些知识对于理解和应用拓扑排序的扩展技巧至关重要。