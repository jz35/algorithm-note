# 第46课：构建前缀信息的技巧 - 解决子数组相关问题

#### 前置知识

- 熟悉哈希表的用法（参考讲解026）。

#### 核心概念

- **前缀信息**：通过构建前缀和、前缀和最早出现的位置、前缀和出现的次数等信息，可以高效解决子数组相关问题。
- **时间复杂度**：通过合理构建前缀信息，可以将问题的时间复杂度控制在O(n)。

#### 题目解析

##### 题目1：构建前缀和数组

- **问题描述**：快速解决子数组范围求和的问题。
- **解题思路**：构建前缀和数组`prefixSum`，其中`prefixSum[i]`表示从数组开头到第`i`个元素的累加和。通过`prefixSum`可以快速计算任意子数组的和。

##### 题目2：构建前缀和最早出现的位置

- **问题描述**：返回无序数组中累加和为给定值的最长子数组长度。
- **解题思路**：
  - 使用哈希表记录每个前缀和最早出现的位置。
  - 遍历数组，计算当前前缀和`curSum`。
  - 如果`curSum - target`在哈希表中存在，则更新最长子数组长度。
  - 将当前前缀和及其位置存入哈希表。

##### 题目3：构建前缀和出现的次数

- **问题描述**：返回无序数组中累加和为给定值的子数组数量。
- **解题思路**：
  - 使用哈希表记录每个前缀和出现的次数。
  - 遍历数组，计算当前前缀和`curSum`。
  - 如果`curSum - target`在哈希表中存在，则累加子数组数量。
  - 更新当前前缀和在哈希表中的次数。

##### 题目4：构建前缀和最早出现的位置

- **问题描述**：返回无序数组中正数和负数个数相等的最长子数组长度。
- **解题思路**：
  - 使用哈希表记录每个前缀和最早出现的位置。
  - 遍历数组，计算当前前缀和`curSum`，其中正数加1，负数减1。
  - 如果`curSum`在哈希表中存在，则更新最长子数组长度。
  - 将当前前缀和及其位置存入哈希表。

##### 题目5：构建前缀和最早出现的位置

- **问题描述**：表现良好的最长时间段问题。
- **解题思路**：
  - 使用哈希表记录每个前缀和最早出现的位置。
  - 遍历数组，计算当前前缀和`curSum`。
  - 如果`curSum`在哈希表中存在，则更新最长时间段长度。
  - 将当前前缀和及其位置存入哈希表。

##### 题目6：构建前缀和余数最晚出现的位置

- **问题描述**：移除的最短子数组长度，使得剩余元素的累加和能被`p`整除。
- **解题思路**：
  - 使用哈希表记录每个前缀和余数最晚出现的位置。
  - 遍历数组，计算当前前缀和`curSum`及其余数`curSum % p`。
  - 如果`curSum % p`在哈希表中存在，则更新最短子数组长度。
  - 将当前前缀和余数及其位置存入哈希表。

##### 题目7：构建前缀奇偶状态最早出现的位置

- **问题描述**：每个元音包含偶数次的最长子串长度。
- **解题思路**：
  - 使用哈希表记录每个前缀奇偶状态最早出现的位置。
  - 遍历数组，计算当前前缀奇偶状态。
  - 如果当前前缀奇偶状态在哈希表中存在，则更新最长子串长度。
  - 将当前前缀奇偶状态及其位置存入哈希表。

#### 总结

- **构建前缀信息的技巧**：通过构建前缀和、前缀和最早出现的位置、前缀和出现的次数等信息，可以高效解决子数组相关问题。
- **更多应用**：除了上述题目，还可以构建其他类型的前缀信息，解决更多子数组相关问题。
- **持续学习**：更多题目和技巧会在后续的题目系列中介绍，建议持续关注和学习。

