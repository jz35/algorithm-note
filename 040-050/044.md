# **第44课：前缀树（Trie）原理和代码详解**

#### **1. 前缀树（Trie）简介**

- **定义**：前缀树（Trie）是一种用于快速检索字符串数据集中的键值的多叉树结构。它通过字符或数字的前缀来构建树形结构。
- **特点**：
  - 每个节点表示一个字符或数字。
  - 从根节点到某个节点的路径表示一个字符串。
  - 如果某个字符串是另一个字符串的前缀，则它们在树中共享相同的路径。

#### **2. 前缀树的使用场景**

- **适用场景**：
  - 需要根据前缀信息进行查询的场景，如：
    - 搜索引擎的自动补全。
    - 字典查询。
    - IP 路由表查找。
    - 单词拼写检查。
- **优点**：
  - 查询效率高，时间复杂度为 O(字符串长度)。
  - 可以快速判断某个字符串是否是其他字符串的前缀。
- **缺点**：
  - 空间复杂度较高，与字符集大小和字符串数量有关。
  - 如果字符集较大（如 Unicode），空间浪费较为明显。

#### **3. 前缀树的实现方式**

前缀树的实现主要有两种方式：类描述（动态结构）和静态数组。

##### **3.1 类描述的实现方式（动态结构）**

- **优点**：实现简单，代码可读性强。
- **缺点**：空间效率较低，因为每个节点都需要动态分配内存。
- **实现细节**：
  - 使用固定数组实现路径（适用于字符集较小的情况）。
  - 使用哈希表实现路径（适用于字符集较大的情况）。

##### **3.2 静态数组的实现方式（推荐）**

- **优点**：空间效率高，适合大规模数据处理。
- **缺点**：需要提前分配足够的空间，实现相对复杂。
- **实现细节**：
  - 使用静态数组存储所有节点。
  - 如果字符集较大，可以通过每一位的信息建树（下节课会展示具体实现）。

#### **4. 前缀树的基本操作**

以下是前缀树的常见操作及其功能：

1. **初始化**：
   - 构造一个空的前缀树。
2. **插入**：
   - 将一个字符串插入到前缀树中。
3. **查询**：
   - 返回前缀树中某个字符串的实例个数。
4. **前缀查询**：
   - 返回前缀树中以某个前缀开头的字符串数量。
5. **删除**：
   - 从前缀树中移除某个字符串。

#### **5. 前缀树的定制**

- **pass**：表示通过某个节点的字符串数量。
- **end**：表示以某个节点结尾的字符串数量。
- **定制**：可以根据具体需求调整节点信息，例如存储单词的权重、路径长度等。

#### **7. 总结**

- **前缀树**是一种高效的字符串检索结构，特别适用于前缀查询。
- **实现方式**：类描述方式适合简单实现，静态数组方式适合大规模数据处理。
- **应用场景**：自动补全、字典查询、IP 路由表等。
- **注意事项**：字符集较大时，空间消耗较高，需谨慎使用。