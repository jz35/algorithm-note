# 第50课：双指针技巧及相关题目

## 一、双指针技巧概述

### （一）定义

双指针技巧是一种通过设置两个指针来解决问题的算法思想。这种技巧的应用范围很广，具体实现形式多样。

### （二）关键点

1. **双指针的形式表达**：有时双指针技巧只是代码实现中的一种形式，并不涉及单调性（贪心）方面的考虑。
2. **单调性（贪心）的考虑**：有时双指针技巧涉及单调性（贪心）方面的考虑，需要对可能性进行取舍。这种情况下，对分析能力的要求较高，需要先进行思考和优化，代码才会呈现出双指针的形式。
3. **分析能力的重要性**：双指针的“皮”不重要，重要的是分析题目单调性（贪心）方面的特征，这种能力才是关键。

### （三）常见双指针类型

1. **同向双指针**：两个指针同向移动。
2. **快慢双指针**：一个指针移动速度快，另一个指针移动速度慢。
3. **从两头往中间的双指针**：两个指针从数组的两端向中间移动。
4. **其他**：根据具体问题，双指针的使用方式可能有所不同。

## 二、双指针技巧的应用

### （一）按奇偶排序数组II

- **问题描述**：给定一个非负整数数组`nums`，其中一半整数是奇数，一半整数是偶数。对数组进行排序，以便当`nums[i]`为奇数时，`i`也是奇数；当`nums[i]`为偶数时，`i`也是偶数。返回任何满足上述条件的数组作为答案。
- **解题思路**：使用同向双指针，一个指针指向奇数位置，另一个指针指向偶数位置，分别找到不符合条件的奇数和偶数并交换。
- **测试链接**：[LeetCode - Sort Array By Parity II](https://leetcode.cn/problems/sort-array-by-parity-ii/)

### （二）寻找重复数

- **问题描述**：给定一个包含`n + 1`个整数的数组`nums`，其数字都在`[1, n]`范围内（包括1和n）。已知至少存在一个重复的整数。假设`nums`只有一个重复的整数，返回这个重复的数。解决方案必须不修改数组`nums`且只用常量级`O(1)`的额外空间。
- **解题思路**：使用快慢双指针（类似链表中的环检测）。快指针每次移动两步，慢指针每次移动一步，最终它们会在环中相遇，然后通过特定的方法找到入口点，即重复的数。
- **测试链接**：[LeetCode - Find the Duplicate Number](https://leetcode.cn/problems/find-the-duplicate-number/)

### （三）接雨水

- **问题描述**：给定`n`个非负整数表示每个宽度为1的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。
- **解题思路**：使用从两头往中间的双指针。维护左右两个指针，同时记录左右两边的最大高度，根据当前指针位置的高度和最大高度计算雨水量，然后移动较矮的一边的指针。
- **测试链接**：[LeetCode - Trapping Rain Water](https://leetcode.cn/problems/trapping-rain-water/)

### （四）救生艇

- **问题描述**：给定数组`people`，`people[i]`表示第`i`个人的体重，船的数量不限，每艘船可以承载的最大重量为`limit`，每艘船最多可同时载两人，但条件是这些人的重量之和最多为`limit`。返回承载所有人所需的最小船数。
- **解题思路**：使用从两头往中间的双指针。先对`people`数组进行排序，然后使用两个指针分别指向最轻和最重的人，尝试将他们配对上船，如果配对成功，则两人都上船；否则，只有最重的人上船。重复这个过程，直到所有人都上船。
- **测试链接**：[LeetCode - Boats to Save People](https://leetcode.cn/problems/boats-to-save-people/)

### （五）盛最多水的容器

- **问题描述**：给定一个长度为`n`的整数数组`height`，有`n`条垂线，第`i`条线的两个端点是`(i, 0)`和`(i, height[i])`。找出其中的两条线，使得它们与`x`轴共同构成的容器可以容纳最多的水。返回容器可以储存的最大水量。
- **解题思路**：使用从两头往中间的双指针。初始化两个指针分别指向数组的两端，计算当前指针所指的两条线构成的容器的水量，然后移动较短的那条线对应的指针，重复这个过程，直到两个指针相遇。
- **测试链接**：[LeetCode - Container With Most Water](https://leetcode.cn/problems/container-with-most-water/)

### （六）供暖器

- **问题描述**：冬季已经来临。你的任务是设计一个有固定加热半径的供暖器向所有房屋供暖。在加热器的加热半径范围内的每个房屋都可以获得供暖。现在，给出位于一条水平线上的房屋`houses`和供暖器`heaters`的位置，找出并返回可以覆盖所有房屋的最小加热半径。
- **解题思路**：使用同向双指针。先对`houses`和`heaters`进行排序，然后使用两个指针分别遍历`houses`和`heaters`，对于每个房屋，找到最近的供暖器，计算距离，并更新最小加热半径。
- **测试链接**：[LeetCode - Heaters](https://leetcode.cn/problems/heaters/)

### （七）缺失的第一个正数

- **问题描述**：给你一个未排序的整数数组`nums`，请你找出其中没有出现的最小的正整数。实现时间复杂度为`O(n)`并且只使用常数级别额外空间的解决方案。
- **解题思路**：使用原地哈希的思想。通过交换操作，将每个正整数放到它应该在的位置上（即数字`i`放到索引`i-1`的位置）。然后遍历数组，第一个不在其位置上的数字对应的索引加1就是缺失的第一个正数。
- **测试链接**：[LeetCode - First Missing Positive](https://leetcode.cn/problems/first-missing-positive/)

## 三、总结

双指针技巧是一种灵活的算法思想，适用于多种问题。掌握双指针技巧的关键在于理解题目的单调性（贪心）特征，而不是单纯地追求双指针的形式。常见的双指针类型包括同向双指针、快慢双指针、从两头往中间的双指针等。通过分析题目特征，合理地选择双指针的类型和移动策略，可以高效地解决问题。