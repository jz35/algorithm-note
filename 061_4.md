# ç¬¬61è¯¾ï¼šæœ€å°ç”Ÿæˆæ ‘

### **æ£€æŸ¥è¾¹é•¿åº¦é™åˆ¶çš„è·¯å¾„æ˜¯å¦å­˜åœ¨**

#### **é¢˜ç›®æè¿°**

ç»™ä½ ä¸€ä¸ª **n ä¸ªç‚¹ç»„æˆçš„æ— å‘å›¾**ï¼Œå…¶è¾¹é›† `edgeList` åŒ…å« `m` æ¡è¾¹ï¼Œæ¯æ¡è¾¹çš„æ ¼å¼å¦‚ä¸‹ï¼š

- ```
  edgeList[i] = [ui, vi, disi]
  ```

  - è¡¨ç¤º **ç‚¹ `ui` å’Œ `vi` ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ï¼Œè¾¹é•¿ä¸º `disi`**ã€‚
  - **æ³¨æ„**ï¼šä¸¤ä¸ªç‚¹ä¹‹é—´ **å¯èƒ½æœ‰å¤šæ¡è¾¹**ã€‚

ä½ è¿˜å°†è·å¾—ä¸€ä¸ª **æŸ¥è¯¢æ•°ç»„ `queries`**ï¼Œå…¶ä¸­æ¯ä¸ªæŸ¥è¯¢çš„æ ¼å¼å¦‚ä¸‹ï¼š

- ```
  queries[j] = [pj, qj, limitj]
  ```

  - **æŸ¥è¯¢ `pj` åˆ° `qj` æ˜¯å¦å­˜åœ¨ä¸€æ¡è·¯å¾„**ï¼Œä¸” **è·¯å¾„ä¸Šæ‰€æœ‰è¾¹çš„é•¿åº¦å¿…é¡»ä¸¥æ ¼å°äº `limitj`**ã€‚

è¯·ä½ è¿”å›ä¸€ä¸ª **å¸ƒå°”æ•°ç»„ `answer`**ï¼Œå…¶ä¸­ï¼š

- **`answer[j] == true`** ä»£è¡¨ **å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„è·¯å¾„**ã€‚
- **`answer[j] == false`** ä»£è¡¨ **ä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„è·¯å¾„**ã€‚

------

#### **è¾“å…¥æè¿°**

- **æ•´æ•° `n`**ï¼ˆ`1 â‰¤ n â‰¤ 10âµ`ï¼‰ä»£è¡¨å›¾ä¸­çš„ **ç‚¹æ•°**ã€‚

- äºŒç»´æ•°ç»„ `edgeList`

  ï¼ˆ

  ```
  0 â‰¤ m â‰¤ 10âµ
  ```

  ï¼‰è¡¨ç¤º 

  è¾¹çš„é›†åˆ

  ï¼š

  - æ¯æ¡è¾¹çš„æ ¼å¼ `[ui, vi, disi]` æ»¡è¶³ `0 â‰¤ ui, vi < n`ï¼Œ`1 â‰¤ disi â‰¤ 10â¹`ã€‚

- äºŒç»´æ•°ç»„ `queries`

  ï¼ˆ

  ```
  1 â‰¤ k â‰¤ 10âµ
  ```

  ï¼‰è¡¨ç¤º 

  æŸ¥è¯¢é›†åˆ

  ï¼š

  - æ¯ä¸ªæŸ¥è¯¢çš„æ ¼å¼ `[pj, qj, limitj]` æ»¡è¶³ `0 â‰¤ pj, qj < n`ï¼Œ`1 â‰¤ limitj â‰¤ 10â¹`ã€‚

------

#### **è¾“å‡ºæè¿°**

- è¿”å› `k` ä¸ªå¸ƒå°”å€¼çš„æ•°ç»„ `answer`

  ï¼Œå…¶ä¸­ï¼š

  - `answer[j] == true`ï¼šå­˜åœ¨ä» `pj` åˆ° `qj` çš„è·¯å¾„ï¼Œä¸”æ‰€æœ‰è¾¹çš„æƒå€¼å°äº `limitj`ã€‚
  - `answer[j] == false`ï¼šå¦åˆ™è¿”å› `false`ã€‚

------

#### **ç¤ºä¾‹**

##### **ç¤ºä¾‹ 1**

**è¾“å…¥**

```cpp
n = 3
edgeList = [[0,1,2], [1,2,4], [2,0,8], [1,0,16]]
queries = [[0,1,2], [0,2,5]]
```

**è¾“å‡º**

```cpp
[false, true]
```

**è§£é‡Š**

- æŸ¥è¯¢ `[0,1,2]`ï¼š`0-1` ä¹‹é—´æœ€çŸ­çš„è¾¹é•¿åº¦ä¸º `2`ï¼Œä½† `limitj=2`ï¼Œæ‰€ä»¥ **ä¸èƒ½é€šè¿‡**ï¼Œè¿”å› `false`ã€‚
- æŸ¥è¯¢ `[0,2,5]`ï¼šè·¯å¾„ `0-1-2` ç»è¿‡çš„è¾¹ `2,4` éƒ½å°äº `5`ï¼Œæ‰€ä»¥ **å¯è¡Œ**ï¼Œè¿”å› `true`ã€‚

------

#### **è§£é¢˜æ€è·¯**

æœ¬é¢˜æ˜¯ **æ— å‘å›¾çš„è·¯å¾„å¯è¾¾æ€§æŸ¥è¯¢é—®é¢˜**ï¼Œè¦æ±‚ï¼š

1. **è·¯å¾„ä¸Šæ‰€æœ‰è¾¹çš„æƒå€¼ä¸¥æ ¼å°äº `limitj`**ã€‚
2. **æŸ¥è¯¢å¤šæ¬¡ï¼Œæ•°æ®è§„æ¨¡å¤§**ï¼ˆ`n, m, k â‰¤ 10âµ`ï¼‰ï¼Œéœ€è¦ **é«˜æ•ˆç®—æ³•**ã€‚

##### **æ ¸å¿ƒæ€æƒ³ï¼šç¦»çº¿æ’åº + å¹¶æŸ¥é›†**

- **å…ˆæ’åº `edgeList`ï¼ˆæŒ‰è¾¹é•¿å‡åºï¼‰**ï¼Œå°è¾¹ä¼˜å…ˆå¤„ç†ã€‚

- **å†æ’åº `queries`ï¼ˆæŒ‰ `limitj` å‡åºï¼‰**ï¼Œå° `limitj` å…ˆæŸ¥è¯¢ã€‚

- ç”¨å¹¶æŸ¥é›†

  ï¼š

  - ä¾æ¬¡å¤„ç†å°äº `limitj` çš„è¾¹ï¼Œå°† **å¯è¾¾ç‚¹åˆå¹¶**ã€‚
  - ç”¨ **å¹¶æŸ¥é›†æŸ¥è¯¢ `pj` å’Œ `qj` æ˜¯å¦åœ¨åŒä¸€è¿é€šåˆ†é‡**ã€‚

------

#### **ä»£ç å®ç°ï¼ˆC++ï¼‰**

```cpp
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

class UnionFind {
private:
    vector<int> parent;
public:
    UnionFind(int n) {
        parent.resize(n);
        for (int i = 0; i < n; i++) parent[i] = i;
    }
    
    int find(int x) {
        if (x != parent[x]) parent[x] = find(parent[x]);
        return parent[x];
    }

    void unite(int x, int y) {
        parent[find(x)] = find(y);
    }

    bool isConnected(int x, int y) {
        return find(x) == find(y);
    }
};

class Solution {
public:
    vector<bool> distanceLimitedPathsExist(int n, vector<vector<int>>& edgeList, vector<vector<int>>& queries) {
        // æŒ‰è¾¹æƒå€¼å‡åºæ’åº
        sort(edgeList.begin(), edgeList.end(), [](const vector<int>& a, const vector<int>& b) {
            return a[2] < b[2];
        });

        int m = edgeList.size();
        int k = queries.size();
        vector<vector<int>> indexedQueries(k);

        // é¢„å¤„ç†æŸ¥è¯¢æ•°ç»„ï¼ŒåŠ ä¸ŠåŸå§‹ç´¢å¼•
        for (int i = 0; i < k; i++) {
            indexedQueries[i] = {queries[i][2], queries[i][0], queries[i][1], i};
        }

        // æŒ‰æŸ¥è¯¢çš„é™åˆ¶å€¼ limit å‡åºæ’åº
        sort(indexedQueries.begin(), indexedQueries.end());

        UnionFind uf(n);
        vector<bool> answer(k);
        int edgeIdx = 0;

        // éå†æ¯ä¸ªæŸ¥è¯¢ï¼ŒåŠ å…¥æ»¡è¶³æ¡ä»¶çš„è¾¹
        for (const auto& q : indexedQueries) {
            int limit = q[0], u = q[1], v = q[2], qIndex = q[3];

            // å¤„ç†æ‰€æœ‰è¾¹æƒå°äº limit çš„è¾¹
            while (edgeIdx < m && edgeList[edgeIdx][2] < limit) {
                uf.unite(edgeList[edgeIdx][0], edgeList[edgeIdx][1]);
                edgeIdx++;
            }

            // åˆ¤æ–­ u å’Œ v æ˜¯å¦åœ¨åŒä¸€ä¸ªè¿é€šåˆ†é‡
            answer[qIndex] = uf.isConnected(u, v);
        }

        return answer;
    }
};
```

------

#### **å¤æ‚åº¦åˆ†æ**

| æ“ä½œ           | å¤æ‚åº¦                                  |
| -------------- | --------------------------------------- |
| **è¾¹æ’åº**     | O(mlogâ¡m)O(m \log m)                     |
| **æŸ¥è¯¢æ’åº**   | O(klogâ¡k)O(k \log k)                     |
| **å¹¶æŸ¥é›†æ“ä½œ** | O(Î±(n))O(\alpha(n))                     |
| **æ€»å¤æ‚åº¦**   | O((m+k)logâ¡(m+k))O((m + k) \log (m + k)) |

------

#### **æ€»ç»“**

âœ… **ç¦»çº¿å¤„ç†æŸ¥è¯¢**ï¼Œé€šè¿‡ **è¾¹æ’åº + æŸ¥è¯¢æ’åº + å¹¶æŸ¥é›†** ä¼˜åŒ–æŸ¥è¯¢æ•ˆç‡ã€‚
 âœ… **å¹¶æŸ¥é›† `union-find`** æä¾›é«˜æ•ˆè·¯å¾„å‹ç¼©ï¼ŒæŸ¥è¯¢è¿é€šæ€§æ¥è¿‘ **å¸¸æ•°çº§**ã€‚
 âœ… **æ—¶é—´å¤æ‚åº¦ O((m+k)logâ¡(m+k))O((m + k) \log (m + k))**ï¼Œé€‚ç”¨äº **å¤§è§„æ¨¡å›¾æ•°æ®** ğŸš€ã€‚