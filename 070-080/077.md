# 第77课：区间dp（下）

## 一、前置知识
- **二维动态规划及空间压缩技巧**：掌握从递归入手解决二维动态规划问题的方法，学会利用空间压缩技巧优化存储。
- **区间动态规划（上）**：理解区间动态规划的基本概念，学会将大范围问题拆分成若干小范围问题求解。

## 二、区间动态规划概述
区间动态规划是一种将大范围问题拆分成若干小范围问题求解的动态规划方法。常见的可能性展开方式包括：
1. 基于两侧端点讨论的可能性展开。
2. 基于范围上划分点的可能性展开。

## 三、典型题目

### 1. 完成配对需要的最少字符数量
- **题目描述**：给定一个由'['、']'、'('、')'组成的字符串，求最少插入多少个括号使字符串的所有括号正确配对。
- **解题思路**：使用区间动态规划，定义`dp[i][j]`表示从第`i`个字符到第`j`个字符之间最少需要插入的括号数。通过遍历区间，考虑括号匹配和插入的情况，更新`dp`数组。
- **测试链接**：[NowCoder - 完成配对需要的最少字符数量](https://www.nowcoder.com/practice/e391767d80d942d29e6095a935a5b96b)

### 2. 涂色 & 奇怪打印机
- **题目描述**：给定一个目标颜色序列，每次可以将一段连续的木板涂成一个颜色，后涂的颜色覆盖先涂的颜色，求最少涂色次数。
- **解题思路**：定义`dp[i][j]`表示从第`i`个位置到第`j`个位置涂成目标颜色的最少次数。通过遍历区间，考虑涂色操作，更新`dp`数组。
- **测试链接**：
  - [Luogu - 涂色](https://www.luogu.com.cn/problem/P4170)
  - [LeetCode - 奇怪打印机](https://leetcode.cn/problems/strange-printer/)

### 3. 合唱队
- **题目描述**：具体描述见题目链接。
- **解题思路**：定义`dp[i][j]`表示从第`i`个位置到第`j`个位置的最优解。通过遍历区间，考虑合唱队的排列方式，更新`dp`数组。
- **测试链接**：[Luogu - 合唱队](https://www.luogu.com.cn/problem/P3205)

### 4. 移除盒子
- **题目描述**：给定一些不同颜色的盒子，每一轮可以移除具有相同颜色的连续`k`个盒子，获得`k * k`个积分，求最大积分总和。
- **解题思路**：定义`dp[i][j][k]`表示从第`i`个位置到第`j`个位置，且有`k`个相同颜色的盒子在`j`位置的最优解。通过遍历区间，考虑移除操作，更新`dp`数组。
- **测试链接**：[LeetCode - 移除盒子](https://leetcode.cn/problems/remove-boxes/)

### 5. 合并石头的最低成本
- **题目描述**：有`n`堆石头排成一排，每次可以将连续的`k`堆石头合并为一堆，成本为这`k`堆石头的总数，求合并成一堆的最低成本。
- **解题思路**：定义`dp[i][j]`表示从第`i`堆到第`j`堆石头合并的最低成本。通过遍历区间，考虑合并操作，更新`dp`数组。
- **测试链接**：[LeetCode - 合并石头的最低成本](https://leetcode.cn/problems/minimum-cost-to-merge-stones/)

### 6. 统计不同回文子序列
- **题目描述**：给定一个字符串，返回其中不同的非空回文子序列个数。
- **解题思路**：定义`dp[i][j]`表示从第`i`个字符到第`j`个字符之间的不同回文子序列个数。通过遍历区间，考虑字符匹配和回文子序列的生成方式，更新`dp`数组。
- **测试链接**：[LeetCode - 统计不同回文子序列](https://leetcode.cn/problems/count-different-palindromic-subsequences/)

## 四、总结
- **区间动态规划**：将大范围问题拆分成若干小范围问题求解，通过定义合适的`dp`数组和状态转移方程，逐步求解。
- **解题技巧**：掌握基于两侧端点和基于范围划分点的可能性展开方式，灵活应用在不同题目中。
- **重要性**：区间动态规划是动态规划的重要分支，掌握其解题套路对解决复杂问题至关重要。