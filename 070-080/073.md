# 第73课：01背包、有依赖的背包

## 一、前置知识
- **二维动态规划及其空间压缩技巧**：熟悉二维动态规划的基本思想和实现方法，以及如何通过空间压缩技巧降低空间复杂度。这是理解和实现背包问题动态规划解法的基础。

## 二、01背包问题
### 问题描述
给定一个正数`t`，表示背包的容量；有`n`个货物，每个货物可以选择1次；每个货物有自己体积`costs[i]`和价值`values[i]`。返回在不超过总容量的情况下，怎么挑选货物能达到价值最大，返回最大的价值。

### 解法
- **动态规划解法**
  - 定义`dp[j]`表示背包容量为`j`时的最大价值。
  - 状态转移方程：`dp[j] = max(dp[j], dp[j - costs[i]] + values[i])`，其中`0 <= i < n`且`costs[i] <= j`。
  - 初始化：`dp[0] = 0`，其余`dp[j] = -∞`。
  - 遍历顺序：先遍历物品，再遍历背包容量（从大到小）。
  - 时间复杂度为O(n * t)，额外空间复杂度为O(t)。

## 三、有依赖的背包问题
### 问题描述
物品分为两大类：主件和附件。主件购买没有限制，钱够就可以；附件购买有限制，该附件所归属的主件先购买，才能购买这个附件。每个主件最多有2个附件，并且附件不会再有附件。给定`m`件商品的信息，包括价格`v`、重要度`p`、归属`q`，以及总钱数`n`，返回在不违反购买规则的情况下最大的收益。

### 解法
- **动态规划解法**
  - 定义`dp[j]`表示背包容量为`j`时的最大收益。
  - 对于主件`i`，直接更新`dp[j]`：`dp[j] = max(dp[j], dp[j - v[i]] + p[i] * v[i])`，其中`v[i]`是主件的价格，`p[i]`是主件的重要度。
  - 对于附件`i`，只有当其归属的主件已经购买时，才更新`dp[j]`：`dp[j] = max(dp[j], dp[j - v[i]] + p[i] * v[i])`，其中`v[i]`是附件的价格，`p[i]`是附件的重要度。
  - 遍历顺序：先遍历主件，再遍历其附件；对于每个物品，遍历背包容量（从大到小）。
  - 时间复杂度为O(n * m)，额外空间复杂度为O(n)。

## 四、题目分析与解法
### 题目1：01背包（模版）
- **问题描述**：给定背包容量`t`和`n`个货物，每个货物有体积`costs[i]`和价值`values[i]`，返回最大价值。
- **解法**：直接应用01背包的动态规划解法。

### 题目2：夏季特惠
- **问题描述**：有预算`X`元，`n`个游戏，每个游戏有原价`a_i`、现价`b_i`和快乐值`w_i`。希望在心理上不觉得吃亏的前提下，获得尽可能多的快乐值。
- **解法**：将问题转化为01背包问题，其中物品的价值为`w_i`，体积为`a_i - b_i`。使用01背包的动态规划解法求解。

### 题目3：目标和
- **问题描述**：给定非负整数数组`nums`和整数`target`，返回构造结果等于`target`的不同表达式的数目。
- **解法**：将问题转化为01背包问题，其中物品的价值为`nums[i]`，体积为`nums[i]`。使用01背包的动态规划解法求解。

### 题目4：最后一块石头的重量 II
- **问题描述**：有一堆石头，每回合选出任意两块石头粉碎，返回最后剩下石头的最小可能重量。
- **解法**：将问题转化为01背包问题，其中物品的价值为`stones[i]`，体积为`stones[i]`。使用01背包的动态规划解法求解。

### 题目5：有依赖的背包（模版）
- **问题描述**：给定`m`件商品的信息，包括价格`v`、重要度`p`、归属`q`，以及总钱数`n`，返回最大收益。
- **解法**：直接应用有依赖的背包的动态规划解法。

### 题目6：非负数组前k个最小的子序列累加和
- **问题描述**：给定数组`nums`和正数`k`，返回所有子序列中累加和最小的前`k`个累加和。
- **解法**：使用堆（优先队列）来解决。时间复杂度为O(n * logn) + O(k * logk)，额外空间复杂度为O(k)。

## 五、总结
- 本节课主要讲解了01背包和有依赖的背包问题的解法，重点在于掌握动态规划的思想和实现方法。
- 通过这些题目的学习，可以深入理解动态规划在解决背包问题中的应用，以及如何处理有依赖关系的物品。
- 在学习过程中，需要注意理解每个问题的解题思路和状态转移方程，以及如何将复杂问题转化为已知的简单问题来求解。
