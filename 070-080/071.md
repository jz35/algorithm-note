# 第71课：子数组最大累加和问题与扩展-下

### 前置知识
- **讲解005-对数器**：对数器是一种验证算法正确性的工具，通过生成随机数据并比较不同算法的输出结果来判断算法是否正确。
- **讲解046-构建前缀信息的技巧**：前缀和是一种常见的算法技巧，通过预先计算数组的前缀和，可以快速求解子数组的和，从而提高算法效率。
- **讲解054-单调队列**：单调队列是一种特殊的队列，队列中的元素始终保持单调递增或单调递减的顺序。在处理滑动窗口问题时，单调队列可以高效地维护窗口内的最大值或最小值。
- **讲解070-子数组最大累加和问题与扩展-上**：这是本节课的前置课程，主要介绍了子数组最大累加和问题的基本概念和解法。

### 子数组最大累加和问题与扩展-下

#### 题目1：乘积最大子数组
- **问题描述**：给定一个double类型数组`nums`，找出数组中乘积最大的非空连续子数组，并返回该子数组所对应的乘积。
- **解题思路**：
  - 由于数组中可能包含负数，因此最大乘积子数组可能以负数结尾，也可能以正数结尾。
  - 使用动态规划的思想，维护两个变量`maxProd`和`minProd`，分别表示以当前元素结尾的最大乘积和最小乘积。
  - 遍历数组，更新`maxProd`和`minProd`，并记录最大乘积。
- **测试链接**：[https://leetcode.cn/problems/maximum-product-subarray/](https://leetcode.cn/problems/maximum-product-subarray/)

#### 题目2：子序列累加和必须被7整除的最大累加和
- **问题描述**：给定一个非负数组`nums`，可以任意选择数字组成子序列，但子序列的累加和必须被7整除，返回最大累加和。
- **解题思路**：
  - 使用动态规划，状态定义为`dp[i][j]`，表示前`i`个数字中，累加和对7取模等于`j`的最大累加和。
  - 遍历数组，更新状态转移方程，最终答案为`dp[n][0]`，其中`n`为数组长度。
- **验证方法**：使用对数器验证算法的正确性。

#### 题目3：魔法卷轴
- **问题描述**：给定一个数组`nums`，其中可能有正、负、0，每个魔法卷轴可以把`nums`中连续的一段全变成0，希望数组整体的累加和尽可能大，卷轴使不使用、使用多少随意，但一共只有2个魔法卷轴，返回数组尽可能大的累加和。
- **解题思路**：
  - 使用动态规划，状态定义为`dp[i][j]`，表示前`i`个数字中，使用了`j`个魔法卷轴的最大累加和。
  - 遍历数组，更新状态转移方程，最终答案为`dp[n][2]`，其中`n`为数组长度。
- **验证方法**：使用对数器验证算法的正确性。

#### 题目4：三个无重叠子数组的最大和
- **问题描述**：给定一个整数数组`nums`和一个整数`k`，找出三个长度为`k`、互不重叠、且全部数字和（3 * k项）最大的子数组，并返回这三个子数组，以下标的数组形式返回结果，如果有多个结果，返回字典序最小的一个。
- **解题思路**：
  - 使用前缀和数组快速计算子数组的和。
  - 使用单调队列维护每个子数组的最大和。
  - 遍历数组，更新三个子数组的最大和，并记录结果。
- **测试链接**：[https://leetcode.cn/problems/maximum-sum-of-3-non-overlapping-subarrays/](https://leetcode.cn/problems/maximum-sum-of-3-non-overlapping-subarrays/)

#### 题目5：可以翻转1次的情况下子数组最大累加和
- **问题描述**：给定一个数组`nums`，允许随意选择数组连续一段进行翻转，返回必须随意翻转1次之后，子数组的最大累加和。
- **解题思路**：
  - 使用动态规划，状态定义为`dp[i][j]`，表示前`i`个数字中，翻转了`j`次的最大累加和。
  - 遍历数组，更新状态转移方程，最终答案为`dp[n][1]`，其中`n`为数组长度。
- **验证方法**：使用对数器验证算法的正确性。

#### 题目6：删掉1个数字后长度为k的子数组最大累加和
- **问题描述**：给定一个数组`nums`，求必须删除一个数字后的新数组中，长度为`k`的子数组最大累加和，删除哪个数字随意。
- **解题思路**：
  - 使用前缀和数组快速计算子数组的和。
  - 使用单调队列维护每个子数组的最大和。
  - 遍历数组，更新子数组的最大和，并记录结果。
- **验证方法**：使用对数器验证算法的正确性。
- **注意事项**：确保已经掌握**讲解054-单调队列**的内容，否则可能难以理解本题的解法。

### 总结
本节课主要介绍了子数组最大累加和问题的多种变体及其解法，包括乘积最大子数组、子序列累加和必须被7整除的最大累加和、魔法卷轴、三个无重叠子数组的最大和、可以翻转1次的情况下子数组最大累加和以及删掉1个数字后长度为k的子数组最大累加和。这些题目涵盖了动态规划、前缀和、单调队列等多种算法技巧，解题思路巧妙，需要仔细理解和掌握。同时，建议从讲解066开始系统学习动态规划大专题，以便更好地理解和应用这些算法。